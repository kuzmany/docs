# Mautic Auto Tagger Plugin

Make UTM tagging easy and automatic for Mautic 4, 5, and 6.

> **Works with Mautic 4, 5, and 6**

---

## What does this plugin do?

The Mautic Auto Tagger plugin adds UTM parameters and custom tags to your links in emails, dynamic content, and focus items. It can also fill in UTM tags for you when you create new emails or content. You can use simple tokens to add dynamic info, like the name of your email or campaign.

---

## Main Features

- **Adds UTM tags automatically:** If your links don’t have UTM tags, the plugin adds them for you.
- **Fills in UTM tags when you create new content:** Default UTM tags appear automatically when you make a new email, dynamic content, or focus item.
- **Custom tags:** Add your own key-value tags to links.
- **Tokens:** Use tokens to insert info like email name, campaign ID, or contact fields.
- **Transliteration:** Use `|transliterate` to make token values URL-safe.
- **Set tags for each channel:** Choose different tags for Email, Dynamic Content, and Focus.
- **Doesn’t overwrite existing UTM tags:** If a link already has UTM tags, the plugin leaves them alone.

---

## How does it work?

- **Automatic tagging:** When you send an email or use dynamic content, the plugin checks each link. If it doesn’t have UTM tags, it adds your default UTM tags and any custom tags you set. Tokens in tags are replaced with real values.
- **Pre-filled tags:** When you create a new email, dynamic content, or focus item, the UTM tag fields are filled in for you.
- **Custom tags:** Add as many custom key-value pairs as you want (like `my_param=value` or `tracker={campaignfield=id}`), and use tokens in them.
- **No conflicts:** The plugin won’t overwrite UTM tags that are already there. Custom tags are only added if their keys aren’t already used.

---

## Using tokens

Tokens let you add info from Mautic automatically to your tags.

- `{contactfield=alias}`: For contact fields (like `{contactfield=firstname}`)
- `{emailfield=property}`: For email properties (like `{emailfield=name}`)
- `{dynamiccontentfield=property}`: For dynamic content properties
- `{focusfield=property}`: For focus item properties
- `{campaignfield=property}`: For campaign properties
- `{eventfield=property}`: For campaign event properties

**Transliteration:**  
Add `|transliterate` to a token to make it URL-safe.  
Example: `{emailfield=name|transliterate}`

---

## Example

1. **Set up:** In the plugin settings under "Tags for emails", set:
    - `utm_source`: `mautic`
    - `utm_medium`: `email`
    - `utm_campaign`: `{campaignfield=name|transliterate}`
    - `utm_content`: `{emailfield=name|transliterate}`
    - Custom Tag: `channel=email`
2. **Turn on:** Check "Automatically append UTM parameters to URLs if not exist".
3. **Create:** Make an email called "Summer Sale" in a campaign called "Q3 Promotions" with a link like `https://my-shop.com/products`.
4. **Send:** The link will look like:  
   `https://my-shop.com/products?utm_source=mautic&utm_medium=email&utm_campaign=Q3-Promotions&utm_content=Summer-Sale&channel=email`

---

## How to install

1. Copy the plugin to `plugins/MauticAutoTaggerBundle`
2. Clear cache:  
   `php bin/console cache:clear`
3. Reload plugins list:  
   `php bin/console mautic:plugins:reload`
4. Re-generate assets:  
   `php bin/console mautic:assets:generate`

---

## FAQ

### Can I personalize my UTM tags?

Yes! You can set them for each channel and use tokens for dynamic values.

### What if my links already have UTM tags?

The plugin won’t change or overwrite UTM tags that are already there.

### Which tokens can I use?

You can use tokens for email, campaign, contact, and more. See above for details.

### What does "Automatically add UTM tags during creating new form" mean?

It fills in UTM tag fields for you when you make a new email, dynamic content, or focus item.

### What does "Automatically append UTM parameters to URLs if not exist" mean?

It makes sure every link has UTM tags, adding them if they’re missing.

---
